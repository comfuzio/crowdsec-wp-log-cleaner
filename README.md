# CrowdSec WordPress Log Cleaner

A simple interactive Bash script that scans for and cleans up large `prod.log` files generated by the CrowdSec plugin inside WordPress Docker volumes.

## Why this script?

When using CrowdSec in WordPress sites (especially with Dockerized environments), the plugin continuously writes to:
/wp-content/uploads/crowdsec/logs/prod.log


If not managed, these logs can:

- Grow to **several gigabytes** over time
- **Waste valuable disk space**
- **Slow down backups** and **inflate backup sizes** unnecessarily
- **Risk filling up server disks** in extreme cases

This script provides a clean and safe way to:

- Preview all `prod.log` files
- See their size and location
- Choose to delete all, delete only large ones, or do nothing

---

## Features

- üßπ **Interactive preview and selection**
- üì¶ **Works inside Docker-based WordPress installations**
- ‚ö° **Quickly frees up disk space**
- üõ°Ô∏è **Safe deletion with user confirmation**
- üìÑ **Clear reporting of how much space was freed**

---

## Requirements

- Linux system (tested on Ubuntu 24.04)
- Bash shell
- `find`, `stat`, `du`, `xargs`, `numfmt` (coreutils)
- Docker-based WordPress installation
- CrowdSec plugin installed inside WordPress

---

## How to use

1. Download the script:

```bash
wget https://yourgithublink/raw/main/crowdsec-wp-log-cleaner.sh
chmod +x crowdsec-wp-log-cleaner.sh
```
2. Run it:
```
./crowdsec-wp-log-cleaner.sh
```
3. Follow the interactive menu!

Important notes
The script only targets files matching:
/wp-content/uploads/crowdsec/logs/prod.log

No other WordPress files, images, or critical data are affected.

Recommended to schedule it via cron or run manually once a month.

Always review detected files before deletion!

Example Output
```
‚úÖ Found 5 prod.log files:
[1] /var/lib/docker/volumes/site1/_data/wp-content/uploads/crowdsec/logs/prod.log - 520M
[2] /var/lib/docker/volumes/site2/_data/wp-content/uploads/crowdsec/logs/prod.log - 700M
Total: 5 files, total size 2.1G

üëâ Select an option [1-3]: 1
‚ö° Deleting all files...
‚úÖ All files have been deleted.
```
